<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HoHoHo Bet | Casino Lobby</title>
<link rel="stylesheet" href="style.css">
<style>
body{margin:0;padding:0;font-family:sans-serif;background:#0b1d0b;color:#fff;overflow-x:hidden}
.top-bar{display:flex;justify-content:space-between;align-items:center;padding:10px;background:#223311;border-bottom:3px solid #ffcc33}
.logo-container{display:flex;align-items:center;gap:10px}
.logo-container img{height:50px;border-radius:10px}
.top-info span{margin-right:15px;font-weight:bold;font-size:16px}
.top-actions button,a{margin-left:10px;color:#fff;text-decoration:none;background:#111;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;font-weight:bold}
.side-menu{position:fixed;left:0;top:70px;width:180px;background:#111;height:100%;padding:10px;display:flex;flex-direction:column;gap:10px;z-index:10}
.side-menu button{width:100%;padding:10px;font-weight:bold;border:none;border-radius:5px;background:#223311;color:#fff;cursor:pointer;transition:0.2s}
.side-menu button:hover{background:#ffcc33;color:#000}
.main-content{margin-left:200px;padding:20px}
.game-grid{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:15px;flex-wrap:wrap;margin-right:50px}
.game-placeholder{background:#111;border-radius:10px;height:180px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#ffcc33;font-weight:bold;font-size:16px;cursor:pointer;transition:0.3s;position:relative;overflow:hidden}
.game-placeholder img{max-width:100%;max-height:100%;border-radius:10px;object-fit:cover;opacity:0.9}
.game-placeholder:hover{transform:scale(1.05);border:3px solid #ffcc33}
.balance-panel{margin-top:10px;font-size:18px;font-weight:bold}
#registrationForm,#loginForm{display:none;background:#111;padding:20px;border-radius:10px;max-width:300px;margin:auto;margin-top:20px}
#registrationForm input,#loginForm input{width:100%;padding:10px;margin:5px 0;border-radius:5px;border:none}
#registrationForm button,#loginForm button{width:100%;padding:10px;margin-top:10px;border-radius:5px;border:none;background:#223311;color:#fff;font-weight:bold;cursor:pointer;transition:0.2s}
#registrationForm button:hover,#loginForm button:hover{background:#ffcc33;color:#000}
.eye-toggle{position:absolute;right:15px;top:38px;cursor:pointer;color:#fff}
</style>
</head>
<body>

<div class="top-bar">
  <div class="logo-container">
    <img src="assets/house_logo.png" alt="House Logo">
    <div>HoHoHo Bet</div>
  </div>
  <div class="top-info">
    <span id="playerIdDisplay"></span>
    <span id="balanceDisplay"></span>
  </div>
  <div class="top-actions">
    <a href="#" id="loginBtn" onclick="showLogin()">Login</a>
    <a href="#" id="registerBtn" onclick="showRegister()">Register</a>
    <button onclick="logoutUser()" id="logoutBtn" style="display:none">Logout</button>
  </div>
</div>

<div class="side-menu" id="sideMenu" style="display:none">
  <button onclick="showProfile()">Profile</button>
  <button onclick="showDeposit()">Deposit</button>
  <button onclick="showWithdraw()">Withdraw</button>
  <button onclick="showHistory()">History</button>
</div>

<div class="main-content">
  <div class="balance-panel" id="balancePanel"></div>

  <!-- Game placeholders -->
  <div class="game-grid" id="gameGrid"></div>

  <!-- Registration & Login Forms -->
  <div id="registrationForm">
    <h3>Register</h3>
    <input type="text" id="regName" placeholder="Full Name">
    <input type="text" id="regPhone" placeholder="Phone Number">
    <div style="position:relative">
      <input type="password" id="regPassword" placeholder="Password">
      <span class="eye-toggle" onclick="toggleEye('regPassword')">üëÅÔ∏è</span>
    </div>
    <button onclick="registerUser()">Register</button>
  </div>

  <div id="loginForm">
    <h3>Login</h3>
    <input type="text" id="loginPhone" placeholder="Phone Number">
    <div style="position:relative">
      <input type="password" id="loginPassword" placeholder="Password">
      <span class="eye-toggle" onclick="toggleEye('loginPassword')">üëÅÔ∏è</span>
    </div>
    <button onclick="loginUser()">Login</button>
  </div>
</div>

<script>
/* User & balance */
let user=JSON.parse(localStorage.getItem("user")||"null");
let balance=Number(localStorage.getItem("balance")||0);

/* Google Script URL */
const googleScriptURL="https://script.google.com/macros/s/AKfycbxf_AZ6uJO5BuW9y0M9EuUjF1ZKphqcLG6SeE5DtOORxusuMosjbEvqUiv7tsd4JVfAdA/exec";

/* Update top bar */
function updateTopBar(){
  if(user){
    document.getElementById("playerIdDisplay").innerText="ID: "+user.id;
    document.getElementById("balanceDisplay").innerText="Balance: "+balance+" Birr";
    document.getElementById("loginBtn").style.display="none";
    document.getElementById("registerBtn").style.display="none";
    document.getElementById("logoutBtn").style.display="inline-block";
    document.getElementById("sideMenu").style.display="flex";
  } else {
    document.getElementById("playerIdDisplay").innerText="";
    document.getElementById("balanceDisplay").innerText="";
    document.getElementById("loginBtn").style.display="inline-block";
    document.getElementById("registerBtn").style.display="inline-block";
    document.getElementById("logoutBtn").style.display="none";
    document.getElementById("sideMenu").style.display="none";
  }
}
updateTopBar();

/* Logout */
function logoutUser(){
  localStorage.removeItem("user");
  user=null;
  updateTopBar();
}

/* Show/hide registration & login */
function showRegister(){document.getElementById("registrationForm").style.display="block";document.getElementById("loginForm").style.display="none";}
function showLogin(){document.getElementById("loginForm").style.display="block";document.getElementById("registrationForm").style.display="none";}

/* Toggle password visibility */
function toggleEye(id){
  const el=document.getElementById(id);
  el.type=el.type==="password"?"text":"password";
}

/* Registration */
function registerUser(){
  const name=document.getElementById("regName").value;
  const phone=document.getElementById("regPhone").value;
  const pass=document.getElementById("regPassword").value;
  if(!name||!phone||!pass)return alert("All fields required");
  const newUser={id:"ID"+Date.now(),name,phone,password:pass};
  localStorage.setItem("user",JSON.stringify(newUser));
  localStorage.setItem("balance",0);
  user=newUser;balance=0;
  updateTopBar();
  alert("Registered successfully! Your ID: "+newUser.id);
  document.getElementById("registrationForm").style.display="none";
}

/* Login */
function loginUser(){
  const phone=document.getElementById("loginPhone").value;
  const pass=document.getElementById("loginPassword").value;
  const storedUser=JSON.parse(localStorage.getItem("user"));
  if(storedUser && storedUser.phone===phone && storedUser.password===pass){
    user=storedUser;balance=Number(localStorage.getItem("balance")||0);
    updateTopBar();
    alert("Login successful!");
    document.getElementById("loginForm").style.display="none";
  } else alert("Phone or password incorrect");
}

/* Side menu placeholders */
function showProfile(){alert("Profile page")}
function showDeposit(){let amt=prompt("Enter deposit amount (min 100 Birr):");amt=Number(amt);if(isNaN(amt)||amt<100)return alert("Invalid amount");balance+=amt;localStorage.setItem("balance",balance);updateTopBar();sendGoogleScript({action:"deposit",playerId:user.id,amount:amt});}
function showWithdraw(){let amt=prompt("Enter withdrawal amount (100-10000 Birr):");amt=Number(amt);if(isNaN(amt)||amt<100||amt>10000)return alert("Invalid amount");if(balance<amt)return alert("Insufficient balance");balance-=amt;localStorage.setItem("balance",balance);updateTopBar();sendGoogleScript({action:"withdraw",playerId:user.id,amount:amt});}
function showHistory(){alert("History page")}

/* Send to Google Script */
function sendGoogleScript(data){
  fetch(googleScriptURL,{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(r=>r.json()).then(console.log).catch(console.error);
}

/* Game placeholders with images */
const games=[
  {name:"Jungle Game",file:"game1.html",img:"assets/jungle.background.jpg"},
  {name:"Animal Slot",file:"game2.html",img:"assets/lion.jpg"},
  {name:"Fast Keno",file:"keno.html",img:"assets/keno_logo.png"}
];
const gameGrid=document.getElementById("gameGrid");
games.forEach(g=>{
  const div=document.createElement("div");
  div.className="game-placeholder";
  div.onclick=()=>{if(g.file)location.href=g.file;};
  const img=document.createElement("img");
  img.src=g.img;
  div.appendChild(img);
  const span=document.createElement("span");
  span.innerText=g.name;
  div.appendChild(span);
  gameGrid.appendChild(div);
});

/* Display balance panel */
document.getElementById("balancePanel").innerText=user?`Balance: ${balance} Birr`:"";
</script>

</body>
</html>
