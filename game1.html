<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Jungle Spin Slot | HoHoHo Bet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="game-container">
  <img src="assets/jungle.background.jpg" class="game-bg">

  <div class="game-header">
    <img src="assets/lion.jpg" class="game-logo">
    <div class="balance-display">Balance: <span id="balance">500</span> birr</div>
  </div>

  <div class="slot-grid" id="slotGrid">
    <!-- 4x4 animal grid populated by JS -->
  </div>

  <div class="game-controls">
    <input type="number" id="betAmount" placeholder="Bet (min 2)" min="2" value="2">
    <button id="spinBtn">SPIN</button>
    <div id="spinMessage"></div>
  </div>
</div>

<script src="script.js"></script>
<script>
/* --- Game 1 Jungle Spin Slot --- */
const slotGrid = document.getElementById("slotGrid");
const balanceDisplay = document.getElementById("balance");
const spinBtn = document.getElementById("spinBtn");
const betInput = document.getElementById("betAmount");
const spinMessage = document.getElementById("spinMessage");

const animals = ["lion.jpg","zebra.jpg","tiger.jpg","hippo.jpg","elephant.jpg","giraffe.jpg"];
let balance = Number(localStorage.getItem("mainBalance")) || 500;

balanceDisplay.textContent = balance;

function generateGrid() {
  slotGrid.innerHTML = "";
  for(let i=0;i<16;i++){
    const cell = document.createElement("div");
    cell.className = "slot-cell";
    const img = document.createElement("img");
    img.src = "assets/"+animals[Math.floor(Math.random()*animals.length)];
    cell.appendChild(img);
    slotGrid.appendChild(cell);
  }
}

function spinSlots() {
  let bet = Number(betInput.value);
  if(bet<2){alert("Min bet 2 birr"); return;}
  if(bet>balance){alert("Insufficient balance"); return;}
  balance -= bet;
  updateBalance();

  spinMessage.textContent = "Spinning...";
  let spinCount = 0;
  const spinInterval = setInterval(()=>{
    generateGrid();
    spinCount++;
    if(spinCount>20){
      clearInterval(spinInterval);
      checkWin(bet);
    }
  },100);
}

function checkWin(bet){
  // Simple winning logic: 3+ same animals in any row
  const cells = Array.from(slotGrid.children);
  const rows = [0,4,8,12].map(i=>cells.slice(i,i+4));
  let win = 0;
  rows.forEach(row=>{
    const counts = {};
    row.forEach(cell=>{
      const src = cell.firstChild.src;
      counts[src] = (counts[src]||0)+1;
    });
    Object.values(counts).forEach(c=>{
      if(c>=3){ win += bet*c; }
    });
  });
  if(win>0){
    spinMessage.textContent = "You win "+win+" birr!";
    balance += win;
    updateBalance();
    const winAudio = new Audio('assets/win.mp3'); winAudio.play();
  }else{
    spinMessage.textContent = "Try again!";
  }
}

function updateBalance(){
  balanceDisplay.textContent = balance;
  localStorage.setItem("mainBalance",balance);
}

spinBtn.addEventListener("click",spinSlots);

generateGrid();
</script>

<style>
.game-container{position:relative;width:100%;height:100vh;overflow:hidden;text-align:center;}
.game-bg{position:absolute;width:100%;height:100%;object-fit:cover;z-index:-1;}
.game-header{display:flex;justify-content:space-between;align-items:center;padding:15px;color:#fff;}
.game-logo{height:60px;border-radius:50%;border:2px solid #fff;}
.balance-display{font-size:20px;}
.slot-grid{display:grid;grid-template-columns:repeat(4,80px);grid-gap:10px;justify-content:center;margin:50px auto;}
.slot-cell{width:80px;height:80px;overflow:hidden;border-radius:12px;border:2px solid #fff;background:rgba(255,255,255,0.1);}
.slot-cell img{width:100%;height:100%;object-fit:cover;}
.game-controls{margin-top:20px;}
#betAmount{padding:10px;width:100px;border-radius:10px;border:none;}
#spinBtn{padding:10px 20px;border:none;border-radius:15px;background:linear-gradient(90deg,#ff0080,#7928ca);color:#fff;font-weight:bold;margin-left:10px;}
#spinMessage{margin-top:10px;font-size:16px;color:#ffcc33;}
</style>

</body>
</html>
