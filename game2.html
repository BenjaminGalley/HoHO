<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Animal Match Puzzle | HoHoHo Bet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="game-container">
  <img src="assets/jungle.background.jpg" class="game-bg">

  <div class="game-header">
    <img src="assets/elephant.jpg" class="game-logo">
    <div class="balance-display">Balance: <span id="balance">500</span> birr</div>
  </div>

  <div class="puzzle-grid" id="puzzleGrid">
    <!-- 4x4 grid populated by JS -->
  </div>

  <div class="game-controls">
    <input type="number" id="betAmount" placeholder="Bet per puzzle (min 2)" min="2" value="2">
    <button id="playBtn">PLAY</button>
    <div id="puzzleMessage"></div>
  </div>
</div>

<script src="script.js"></script>
<script>
/* --- Game 2 Animal Match Puzzle --- */
const puzzleGrid = document.getElementById("puzzleGrid");
const balanceDisplay = document.getElementById("balance");
const playBtn = document.getElementById("playBtn");
const betInput = document.getElementById("betAmount");
const puzzleMessage = document.getElementById("puzzleMessage");

const animals = ["lion.jpg","zebra.jpg","tiger.jpg","hippo.jpg","elephant.jpg","giraffe.jpg"];
let balance = Number(localStorage.getItem("mainBalance")) || 500;
balanceDisplay.textContent = balance;

let gridArr = [];

function generatePuzzle(){
  puzzleGrid.innerHTML = "";
  gridArr = [];
  for(let i=0;i<16;i++){
    const animal = animals[Math.floor(Math.random()*animals.length)];
    gridArr.push(animal);
    const cell = document.createElement("div");
    cell.className = "puzzle-cell";
    const img = document.createElement("img");
    img.src="assets/"+animal;
    cell.appendChild(img);
    puzzleGrid.appendChild(cell);
  }
}

function playPuzzle(){
  let bet = Number(betInput.value);
  if(bet<2){alert("Min bet 2 birr"); return;}
  if(bet>balance){alert("Insufficient balance"); return;}
  balance -= bet;
  updateBalance();

  // Simple match logic: count any 3+ same animals in row
  const rows = [0,4,8,12].map(i=>gridArr.slice(i,i+4));
  let win=0;
  rows.forEach(row=>{
    const counts={};
    row.forEach(animal=>counts[animal]=(counts[animal]||0)+1);
    Object.values(counts).forEach(c=>{if(c>=3) win += bet*c;});
  });

  if(win>0){
    puzzleMessage.textContent = "You win "+win+" birr!";
    balance += win;
    updateBalance();
    const winAudio = new Audio('assets/win.mp3'); winAudio.play();
  }else{
    puzzleMessage.textContent = "Try again!";
  }

  // Refresh puzzle
  generatePuzzle();
}

function updateBalance(){
  balanceDisplay.textContent = balance;
  localStorage.setItem("mainBalance",balance);
}

playBtn.addEventListener("click",playPuzzle);

generatePuzzle();
</script>

<style>
.game-container{position:relative;width:100%;height:100vh;overflow:hidden;text-align:center;}
.game-bg{position:absolute;width:100%;height:100%;object-fit:cover;z-index:-1;}
.game-header{display:flex;justify-content:space-between;align-items:center;padding:15px;color:#fff;}
.game-logo{height:60px;border-radius:50%;border:2px solid #fff;}
.balance-display{font-size:20px;}
.puzzle-grid{display:grid;grid-template-columns:repeat(4,80px);grid-gap:10px;justify-content:center;margin:50px auto;}
.puzzle-cell{width:80px;height:80px;overflow:hidden;border-radius:12px;border:2px solid #fff;background:rgba(255,255,255,0.1);cursor:pointer;}
.puzzle-cell img{width:100%;height:100%;object-fit:cover;}
.game-controls{margin-top:20px;}
#betAmount{padding:10px;width:140px;border-radius:10px;border:none;}
#playBtn{padding:10px 20px;border:none;border-radius:15px;background:linear-gradient(90deg,#ff0080,#7928ca);color:#fff;font-weight:bold;margin-left:10px;}
#puzzleMessage{margin-top:10px;font-size:16px;color:#ffcc33;}
</style>

</body>
</html>
